{{#section 'css'}}
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.3/css/fileinput.min.css" media="all"
    rel="stylesheet" type="text/css" />

{{/section}}
{{#section 'js'}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.3/js/fileinput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.0.3/themes/fa/theme.min.js"></script>

<script>
	$('#fuMain').fileinput({
        theme: 'fa',
        showUpload: false,
        dropZoneEnabled: false,
        allowedFileExtensions: ['png', 'jpg', 'gif'],
    });
	
    $('#NgaySinh').datetimepicker({
        format: 'd/m/Y',
        timepicker: false,
        mask: true,
    });

	{{#each info}}
	{{#if NgaySinh}}
	$( "#NgaySinh" ).datetimepicker({ 	
		defaultDate: '{{NgaySinh}}',
	});
	{{/if}}
	{{/each}}
</script>
{{/section}}

<main class="main" role="main">
	<div class="container-fruid mb-3">
		<div class="d-flex wrapper">
			<!-- Sidebar -->
			<div class="bg-light border-right" id="sidebar-wrapper">
				<div class="list-group list-group-flush">
					<!-- Bao gồm việc sửa thông tin cá nhân -->
					<a href="/accountManagement" class="list-group-item list-group-item-action bg-light">
						Xem thông tin cá nhân
					</a>
					<a href="/yourPointAndDetail" class="list-group-item list-group-item-action bg-light">
						Xem điểm đánh giá và chi tiết
					</a>	
					
					{{#each this.info}}
					<a class="list-group-item list-group-item-action bg-light flex-column align-items-start"
						href="#submenu-watch" id="navbarDropdown" data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
						Xem danh sách
						<i class="fa fa-caret-down" style="float: right;" aria-hidden="true"></i>
					</a>
					
					<!-- Submenu của Xem danh sách -->
					<div id="submenu-watch" class="collapse sidebar-submenu">
						<a href="Theo dõi.html" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Sản phẩm yêu thích</span>
						</a>
						<a href="Đang đấu giá.html" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Sản phẩm đang đấu giá</span>
						</a>
						<a href="Đã thắng.html" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Sản phẩm đã thắng đấu giá</span>
						</a>
						{{#if this.isSeller}}
						<a href="Đã đăng.html" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Sản phẩm đang đăng đấu giá</span>
						</a>
						<a href="Đã bán.html" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Sản phẩm có người thắng đấu giá</span>
						</a>
						{{/if}}
						{{#if this.isAdmin}}
						<a href="Đã đăng.html" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Sản phẩm đang đăng đấu giá</span>
						</a>
						<a href="Đã bán.html" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Sản phẩm có người thắng đấu giá</span>
						</a>
						{{/if}}
					</div>
					
					{{#if this.isAdmin}}
					<a class="list-group-item list-group-item-action bg-light flex-column align-items-start"
						href="#submenu-user" id="navbarDropdown" data-toggle="collapse" aria-haspopup="true" aria-expanded="false">
						Quản lý người dùng
						<i class="fa fa-caret-down" style="float: right;" aria-hidden="true"></i>
					</a>
					
					<!-- Submenu của Quản lý người dùng -->
					<div id="submenu-user" class="collapse sidebar-submenu">
						<a href="/userView" class="list-group-item list-group-item-action bg-light">
							<!-- Bao gồm việc xóa người dùng, nâng cấp bidder, hạ cấp seller-->
							<span class="menu-collapsed">Xem danh sách toàn bộ người dùng</span>
						</a>
						<a href="/bidderList" class="list-group-item list-group-item-action bg-light">
							<span class="menu-collapsed">Xem danh sách bidder xin nâng cấp tài khoản</span>
						</a>
					</div>
					{{/if}}
					
					<!-- Đăng sản phẩm -->
					{{#if this.isSeller}}
					<a href="PostProduct.html" class="list-group-item list-group-item-action bg-light">
						Đăng sản phẩm đấu giá mới
					</a>
					{{/if}}
					{{#if this.isAdmin}}
					<a href="PostProduct.html" class="list-group-item list-group-item-action bg-light">
						Đăng sản phẩm đấu giá mới
					</a>
					{{/if}}
					{{/each}}
					<!-- Add more items here-->
				</div>
			</div>
			<!-- /#sidebar-wrapper -->
			
			<div class="text-center mt-3" id="page-content-wrapper">
				<h1>Thông tin cá nhân</h1>
				
				{{#if this.empty}}
				<div class="card-body">
					<p class="card-text">Không có dữ liệu.</p>
				</div>
				{{else}}

				<form method="POST" enctype="multipart/form-data">
					<div class="card m-3">
						<h2 class="card-header">Hồ sơ</h2>
						{{#if errors}}
							<p class="alert alert-danger">
							{{#each errors }}
								{{this.msg}} <br>
							{{/each}}
							</p>
						{{/if}}

						<div class="card-body">
							{{#each info}}
							<table class="table">
								<tr>
									<th>Ảnh</th>
									<td id="second-col">
										Bấm vào để chọn ảnh khác
										<img name="avatar" id="avatar" type="file" class="rounded-circle my-3"
											 src="{{AvatarURL}}" alt="Your avatar" width="200" height="200">
									</td>
									<td style="text-align: right;">
										<div class="file-loading">
											<input id="fuMain" name="AvatarURL" type="file" multiple required="true"></div>
										</div>
									</td>
								</tr>
								<tr>
									<th>Họ</th>
									<td id="second-col-2">
										<input type="text" name="firstName" value="{{../firstName}}" required=""></input>
									</td>
									<td id="required" style="text-align: right;">*</td>
								</tr>
								<tr>
									<th>Tên</th>
									<td id="second-col-2">
										<input type="text" name="lastName" value="{{../lastName}}" required=""></input>
									</td>
									<td id="required" style="text-align: right;">*</td>
								</tr>

								<tr>
									<th>Email</th>
									<td id="second-col">
										<input type="hidden" name="id" value="{{../authUser.ID}}" required=""></input>
										<input type="text" name="Email" value="{{Email}}" required=""></input>
									</td>
									<td id="required" style="text-align: right;">*</td>								
								</tr>

								<tr>
									<th>Ngày sinh</th>
									<td id="second-col">
									    <input type="text" id="NgaySinh" name="NgaySinh" value="{{NgaySinh}}"></input>
									</td>
								</tr>
								<tr>
									<th>Địa chỉ</th>
									<td id="second-col">
										<input type="text" name="DiaChi" value="{{DiaChi}}"></input>
									</td>
								</tr>
								<tr>
									<th>Điện thoại</th>
									<td id="second-col">
										<input type="number" name="DienThoai" value="{{DienThoai}}"></input>
									</td>
								</tr>
							</table>
							{{/each}}
						</div>
					</div>
					<button class="btn btn-primary" type="submit">
						Lưu lại
					</button>
				</form>
				{{/if}}
			</div>
		</div>
	</div>		
</main>

